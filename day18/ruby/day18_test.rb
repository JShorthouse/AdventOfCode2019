require "test/unit"
require "./day18_lib.rb"

class LibTests < Test::Unit::TestCase
  def test_has_needed_keys
    assert_equal true, has_needed_keys(["a", "b"], ["a"])
    assert_equal true, has_needed_keys(["a", "b"], ["a", "b"])
    assert_equal true, has_needed_keys(["a", "b", "c"], ["a", "b"])
    assert_equal true, has_needed_keys(["a", "b", "c"], [])
    assert_equal false, has_needed_keys(["a", "b"], ["a","c","d","b"])
    assert_equal false, has_needed_keys(["a", "b"], ["a","c","b"])
  end
  def test_find_nodes

    maze = [
      ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
      ["#","f",".","D",".","E",".","e",".","C",".","b",".","A",".","@",".","a",".","B",".","c",".","#"],
      ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".","#"],
      ["#","d",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#"],
      ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"]
    ]

    objects = find_maze_objects(maze)
    calculate_paths(maze, objects)
    assert_equal 86, calculate_shortest_path(objects) 


    maze = [
      ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
      ["#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","b",".","C",".","D",".","f","#"],
      ["#",".","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
      ["#",".",".",".",".",".","@",".","a",".","B",".","c",".","d",".","A",".","e",".","F",".","g","#"],
      ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"]
    ]

    objects = find_maze_objects(maze)
    calculate_paths(maze, objects)
    assert_equal 132, calculate_shortest_path(objects) 


    maze = [
      ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
      ["#","i",".","G",".",".","c",".",".",".","e",".",".","H",".","p","#"],
      ["#","#","#","#","#","#","#","#",".","#","#","#","#","#","#","#","#"],
      ["#","j",".","A",".",".","b",".",".",".","f",".",".","D",".","o","#"],
      ["#","#","#","#","#","#","#","#","@","#","#","#","#","#","#","#","#"],
      ["#","k",".","E",".",".","a",".",".",".","g",".",".","B",".","n","#"],
      ["#","#","#","#","#","#","#","#",".","#","#","#","#","#","#","#","#"],
      ["#","l",".","F",".",".","d",".",".",".","h",".",".","C",".","m","#"],
      ["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"]
    ]

    objects = find_maze_objects(maze)
    calculate_paths(maze, objects)
    assert_equal 136, calculate_shortest_path(objects) 

  end
end

