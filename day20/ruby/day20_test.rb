require "test/unit"
require "./day20_lib.rb"

class LibTests < Test::Unit::TestCase
  def test_find_nodes
    map = [
[" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "A", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
[" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "A", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
[" ", " ", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", " ", " "],
[" ", " ", "#", ".", "#", ".", ".", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", "#", ".", ".", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", "#", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", ".", ".", ".", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", "#", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", ".", ".", ".", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", "A", " ", " ", " ", "C", " ", " ", " ", " ", "#", ".", "#", ".", "#", ".", "#", " ", " "],
[" ", " ", "#", "#", "#", "#", "#", "#", "#", " ", " ", " ", " ", " ", " ", " ", " ", "S", " ", " ", " ", "P", " ", " ", " ", " ", "#", "#", "#", "#", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", ".", ".", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", ".", ".", ".", ".", ".", "V", "T"],
[" ", " ", "#", ".", "#", ".", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", "#", "#", "#", "#", "#", " ", " "],
[" ", " ", "#", ".", ".", ".", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "Y", "N", ".", ".", ".", ".", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", "#", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "#", "#", "#", "#", ".", "#", " ", " "],
["D", "I", ".", ".", ".", ".", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", ".", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", "#", "#", "#", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", "#", "#", "#", ".", "#", " ", " "],
["Z", "Z", ".", ".", ".", ".", ".", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "Q", "G", ".", ".", ".", ".", "#", ".", ".", "A", "S"],
[" ", " ", "#", "#", "#", ".", "#", "#", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "#", "#", "#", "#", "#", "#", " ", " "],
["J", "O", ".", ".", "#", ".", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", ".", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", ".", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "#", "#", ".", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", ".", ".", "#", ".", ".", "D", "I", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "B", "U", ".", ".", ".", ".", "#", ".", ".", "L", "F"],
[" ", " ", "#", "#", "#", "#", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", "#", "#", "#", "#", "#", " ", " "],
["Y", "N", ".", ".", ".", ".", ".", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "V", "T", ".", ".", "#", ".", ".", ".", ".", "Q", "G"],
[" ", " ", "#", ".", "#", "#", "#", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", "#", "#", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", ".", ".", ".", "#", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", ".", ".", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", "#", "#", ".", "#", "#", "#", " ", " ", " ", " ", "J", " ", "L", " ", " ", " ", " ", " ", "J", " ", " ", " ", " ", "#", ".", "#", ".", "#", "#", "#", " ", " "],
[" ", " ", "#", ".", ".", ".", ".", ".", "#", " ", " ", " ", " ", "O", " ", "F", " ", " ", " ", " ", " ", "P", " ", " ", " ", " ", "#", ".", "#", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", ".", "#", ".", "#", "#", "#", "#", "#", ".", "#", "#", "#", "#", "#", ".", "#", "#", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", ".", ".", "#", ".", ".", ".", ".", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", "#", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", ".", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", ".", ".", "#", ".", "#", ".", "#", ".", "#", ".", ".", ".", ".", ".", "#", ".", "#", " ", " "],
[" ", " ", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", ".", "#", ".", "#", ".", "#", "#", "#", "#", "#", "#", "#", " ", " "],
[" ", " ", "#", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", ".", ".", ".", "#", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "#", " ", " "],
[" ", " ", "#", "#", "#", "#", "#", "#", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", ".", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", "#", " ", " "],
[" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "B", " ", " ", " ", "J", " ", " ", " ", "C", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],
[" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "U", " ", " ", " ", "P", " ", " ", " ", "P", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "]
    ]

    assert_equal 58, find_length_to_exit(map)


    map = [
      [" "," "," "," "," "," "," "," "," ","A"," "," "," "," "," "," "," "," "," "," "," "],
      [" "," "," "," "," "," "," "," "," ","A"," "," "," "," "," "," "," "," "," "," "," "],
      [" "," ","#","#","#","#","#","#","#",".","#","#","#","#","#","#","#","#","#"," "," "],
      [" "," ","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".","#"," "," "],
      [" "," ","#","#","#","#","#","#","#",".","#","#","#","#","#","#","#",".","#"," "," "],
      [" "," ","#","#","#","#","#","#","#",".","#","#","#","#","#","#","#",".","#"," "," "],
      [" "," ","#","#","#","#","#","#","#",".","#","#","#","#","#","#","#",".","#"," "," "],
      [" "," ","#","#","#","#","#"," "," ","B"," "," "," "," ","#","#","#",".","#"," "," "],
      ["B","C",".",".",".","#","#"," "," ","C"," "," "," "," ","#","#","#",".","#"," "," "],
      [" "," ","#","#",".","#","#"," "," "," "," "," "," "," ","#","#","#",".","#"," "," "],
      [" "," ","#","#",".",".",".","D","E"," "," ","F"," "," ","#","#","#",".","#"," "," "],
      [" "," ","#","#","#","#","#"," "," "," "," ","G"," "," ","#","#","#",".","#"," "," "],
      [" "," ","#","#","#","#","#","#","#","#","#",".","#","#","#","#","#",".","#"," "," "],
      ["D","E",".",".","#","#","#","#","#","#","#",".",".",".","#","#","#",".","#"," "," "],
      [" "," ","#",".","#","#","#","#","#","#","#","#","#",".","#","#","#",".","#"," "," "],
      ["F","G",".",".","#","#","#","#","#","#","#","#","#",".",".",".",".",".","#"," "," "],
      [" "," ","#","#","#","#","#","#","#","#","#","#","#",".","#","#","#","#","#"," "," "],
      [" "," "," "," "," "," "," "," "," "," "," "," "," ","Z"," "," "," "," "," "," "," "],
      [" "," "," "," "," "," "," "," "," "," "," "," "," ","Z"," "," "," "," "," "," "," "]
    ]

    assert_equal 23, find_length_to_exit(map)
  end
end

